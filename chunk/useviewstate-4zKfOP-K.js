var w=Object.defineProperty;var g=(a,t,e)=>t in a?w(a,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):a[t]=e;var c=(a,t,e)=>(g(a,typeof t!="symbol"?t+"":t,e),e);import{effectScope as f}from"./importmap-vue-u6Q_1Jji.js";import{useRoute as h}from"./importmap-vue-router-aHGpzyJi.js";import{PageStack as m,Config as l}from"./main-f7BGirYr.js";class ${constructor(){c(this,"scope",f(!0));c(this,"state");this.state=this.scope.run(this.createState)||{}}onDestroy(){this.scope.stop()}}const i=class i{constructor(){c(this,"viewStateMap",new Map);m.getInstance().addPopCallback(t=>{this.viewStateMap.forEach((e,n)=>{if(n.indexOf(t)===0){const s=e;s&&(s.onDestroy(),this.viewStateMap.delete(t))}})})}static getInstance(){return i.instance||(i.instance=new i),i.instance}getViewState(t,e){let n;return n=this.create(e),this.viewStateMap.set(t,n),n}getViewStateByKey(t){let e=this.viewStateMap.get(t);return e}create(t){return new t}};c(i,"instance");let r=i;function d(a){var u;const e=((u=h().query[l.keyName])==null?void 0:u.toString())||"",n=a.toString(),s=n.length,p=n.slice(s/2,Math.min(s/2+20,s)),o=`${e}-${a.name}_${s}_${p}`,S=r.getInstance().getViewStateByKey(o);return S||r.getInstance().getViewState(o,a)}export{$ as BaseViewState,d as useViewState};
