import{useViewModel as f,useSystemBack as A,observeEffect as a,observeState as E,router as B,HOTSPOT_DEVICE_IP as $,xcsApp as T,__unplugin_components_0 as F,_export_sfc as D}from"./main-f7BGirYr.js";import{useConnectToast as N,WifiDirectAndroidViewModel as q,IpViewModel as O,ConnectHotspotEvent as P,ConnectByIpEvent as R,ConnectDeviceSuccessEvent as L}from"./useconnecttoast-pF_Ib8b4.js";import"../assets/index-FfF0Lcw0.js";import{HotspotConfigViewModel as W,SaveHotspotPasswordEvent as z}from"./hotspotconfigviewmodel-8JYLNcii.js";import{useI18n as K}from"./importmap-vue-i18n-LlhaB8iP.js";import{useRoute as U}from"./importmap-vue-router-aHGpzyJi.js";import{defineComponent as j,ref as m,onMounted as G,openBlock as J,createElementBlock as Q,createVNode as n,withCtx as d,createBaseVNode as t,toDisplayString as _,Fragment as X,createTextVNode as Y}from"./importmap-vue-u6Q_1Jji.js";import{Button as Z,NavBar as ee,Field as oe}from"./importmap-vant-Ij4SMMwJ.js";const te={class:"header_tip"},ne={class:"edit-wrap"},se={class:"right-lock"},ce={class:"btn_list"},le=j({__name:"Index",setup(ae){const{showConnectToast:v,successToastAction:V,failToastAction:y,closeConnectToast:w}=N(),{t:g}=K(),C=U(),s=f(q),S=f(W),c=f(O),i=m(!1),p=m(""),l=m(""),r=()=>{B.replace({path:"/connect-device",query:{active:"HOTSPOT"}})};A(()=>(r(),!0));const H=e=>{const o=e.replace(/[\u4e00-\u9fa5]|[\ud800-\udbff][\udc00-\udfff]/g,"");return console.log("passwordFormatter",e,o),o};a(()=>s.uiEffect.ConnectHotspotSuccess,()=>{S.sendEvent(new z(p.value,l.value)),c.sendEvent(new R($,!0,!1))}),a(()=>s.uiEffect.ConnectHotspotFail,()=>{T.modal.showToast({msg:g("device.connect.connect_failed")}),setTimeout(()=>{r()},3e3)}),E(()=>s.uiState.isConnectHotspotLoading,e=>{e?v():w()}),a(()=>c.uiEffect.showToast,e=>{T.modal.showToast({msg:g(e.msgKey)})}),a(()=>c.uiEffect.connectSuccess,()=>{V(),s.sendEvent(new L)}),a(()=>c.uiEffect.connectFail,()=>{y(),setTimeout(()=>{r()},3e3)}),E(()=>c.uiState.connectLoadingVisible,e=>{e?v():w()});const I=()=>{s.sendEvent(new P(p.value,l.value))},k=()=>{window.MeApi.openNative.openWebInApp("https://s.xtool.com/Hotspot/more-info")};return G(()=>{console.log("=====route.query",C.query),p.value=C.query.ssid}),(e,o)=>{const b=F,h=Z,M=ee,x=oe;return J(),Q(X,null,[n(M,{title:e.$t("mobile.connect.enter_psw"),fixed:"",placeholder:""},{left:d(()=>[n(h,{class:"header-lft-btn",size:"small",onClick:r},{default:d(()=>[n(b,{name:"arrow_left",color:"#fff",class:"f-s-22"})]),_:1})]),_:1},8,["title"]),t("div",null,[t("div",te,_(e.$t("mobile.connect.encryption")),1),t("div",null,[t("div",ne,[n(x,{modelValue:l.value,"onUpdate:modelValue":o[0]||(o[0]=u=>l.value=u),class:"edit_content",type:i.value?"text":"password",placeholder:e.$t("mobile.connect.placeholder_password"),maxlength:"16",border:!1,clearable:"",formatter:H,onClickRightIcon:o[1]||(o[1]=u=>i.value=!i.value)},{"right-icon":d(()=>[t("div",se,[n(b,{name:i.value?"eye-on":"eye-off",class:"f-s-18"},null,8,["name"])])]),_:1},8,["modelValue","type","placeholder"]),t("span",{class:"forget_pwd",onClick:k},_(e.$t("mobile.connect.forgot_password")),1)])]),t("div",ce,[n(h,{class:"btn",disabled:l.value.length<8,onClick:o[2]||(o[2]=u=>I())},{default:d(()=>[Y(_(e.$t("mobile.connect.confirm_and_connect")),1)]),_:1},8,["disabled"])])])],64)}}}),ve=D(le,[["__scopeId","data-v-09f4f89d"]]);export{ve as default};
