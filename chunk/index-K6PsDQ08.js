import{useViewModel as O,__unplugin_components_0 as b,_export_sfc as T,useSystemBack as he,localization as q,UNIT_TYPE as K,GRAPHICS_CURVES_QUALITY as G,xcsApp as ee,OpenShopUrlEvent as fe,OpenProjectUrlEvent as ke,OpenHelpCenterUrlEvent as ye,SetDisplayVectorFillEvent as Ie,SetUnitEvent as Ce,SetLanguageEvent as we,SetQualityEvent as Me,useNetwork as Ne,observeState as te,gtmEvokePassport as be}from"./main-f7BGirYr.js";import{useI18n as V}from"./importmap-vue-i18n-LlhaB8iP.js";import{useRouter as ne}from"./importmap-vue-router-aHGpzyJi.js";import"./griditem.vue_vue_type_style_index_0_scoped_39934db8_lang-w40geAFS.js";import{UserCenterViewModel as R,Card as oe,OpenSettingEvent as xe,OpenPointsHistoryEvent as Ee,OpenSafeRuleEvent as ze,LoginEvent as je,RenameUserNameEvent as Se,LogoutEvent as De}from"./card-QDkFRbbw.js";import"../assets/index-FfF0Lcw0.js";import{defineComponent as A,computed as g,openBlock as o,createElementBlock as r,createVNode as p,withCtx as h,createBaseVNode as a,Fragment as S,renderList as L,toDisplayString as I,mergeProps as se,unref as u,ref as y,watch as Le,createBlock as E,withModifiers as Oe,createCommentVNode as z,createTextVNode as X,pushScopeId as Te,popScopeId as Ve}from"./importmap-vue-u6Q_1Jji.js";import{SettingViewModel as Ae}from"./settingviewmodel-IPUaoc4k.js";import{Switch as Qe,Cell as Ue,CellGroup as Be,Picker as Pe,Popup as $e,Dialog as Ye,Image as qe,NavBar as Ge}from"./importmap-vant-Ij4SMMwJ.js";const Re={class:"account-box"},He=["onClick"],Fe={class:"account-label"},Ze=A({__name:"AccountList",setup(w){const e=O(R),{t:_}=V(),s={aspectRatio:"auto",cardBgc:"#fff",borderRadius:12},l=g(()=>[{label:_("common.menu.account"),icon:"user-setting-account-setting",onClick:()=>{e.sendEvent(new xe)}},{label:_("common.menu.points"),icon:"user-setting-account-points",onClick:()=>{e.sendEvent(new Ee)}},{label:_("common.menu.safety"),icon:"user-setting-account-safety",onClick:()=>{e.sendEvent(new ze)}}]);return(i,c)=>{const v=b;return o(),r("div",null,[p(u(oe),se(s,{class:"account-container"}),{default:h(()=>[a("div",Re,[(o(!0),r(S,null,L(l.value,f=>(o(),r("div",{key:f.label,class:"account-item",onClick:f.onClick},[p(v,{name:f.icon,size:"26px",class:"f-s-26",color:"#3E3E3E"},null,8,["name"]),a("div",Fe,I(f.label),1)],8,He))),128))])]),_:1},16)])}}}),Je=T(Ze,[["__scopeId","data-v-5aae0a8e"]]),We={class:"custom-cell-title"},Ke={class:"fl"},Xe={key:0,class:"flex"},et=A({__name:"Setting",setup(w){const{t:e}=V(),_=ne(),s=O(Ae);he(()=>(_.back(),!0));const l=y(!1),i=y(""),c=y(),v=y(0),f=y(!1),M=y(!1),N=g(()=>[[{id:"unit",title:e("setting.unit"),onClick:P},{id:"language",title:e("setting.language"),onClick:P},{id:"graphicsCurvesQuality",title:e("setting.graphics_curves_quality.title"),onClick:P,icon:"graph_quality",onIconClick:de},{id:"graphicFillStatus",title:e("setting.graphic_fill_status"),type:"switch"},{id:"about",title:e("mobile.common.about"),onClick:D}],[{id:"project",title:e("common.menu.link_example"),onClick:D},{id:"help",title:e("example.detail.help_center"),onClick:D},{id:"shop",title:e("common.menu.link_mall"),onClick:D}]]),Q=g(()=>{var t;return(t=N.value.flat().find(d=>d.id===i.value))==null?void 0:t.title}),j=g(()=>({BEST:[`${e("setting.graphics_curves_quality.option_best")}: `,e("setting.graphics_curves_quality.option_best_desc")],HIGH:[`${e("setting.graphics_curves_quality.option_high")}: `,e("setting.graphics_curves_quality.option_high_desc")],MEDIUM:[`${e("setting.graphics_curves_quality.option_medium")}: `,e("setting.graphics_curves_quality.option_medium_desc")]})),n=y(!1);Le(()=>s.uiState.isDisplayVectorFill,t=>{n.value=t},{immediate:!0});const x=()=>{s.sendEvent(new Ie(n.value))},U=g(()=>s.uiState.unit),B=g(()=>s.uiState.quality),le=g(()=>q.local),H=y(),ae=g(()=>H.value||q.getLocal(le.value)),F=g(()=>({unit:U.value,language:ae.value,graphicsCurvesQuality:B.value})),ie=q.supportLangs.map(t=>({value:t.lang,label:t.label})),Z=g(()=>({unit:[{label:e("setting.unit_mm"),value:K.MM},{label:e("setting.unit_in"),value:K.IN}],language:ie,graphicsCurvesQuality:[{label:e("setting.graphics_curves_quality.option_best"),value:G.BEST},{label:e("setting.graphics_curves_quality.option_high"),value:G.HIGH},{label:e("setting.graphics_curves_quality.option_medium"),value:G.MEDIUM}]})),J={unit:t=>{s.sendEvent(new Ce(t.selectedValues[0]))},language:t=>{s.sendEvent(new we(t.selectedValues[0]))},graphicsCurvesQuality:t=>{s.sendEvent(new Me(t.selectedValues[0]))}},ce=(t,d=[])=>{let C=d.find($=>$.value===t);return(C==null?void 0:C.label)??""},P=t=>{l.value=!0,i.value=t,v.value=Math.random(),c.value=[F.value[i.value]]},ue=async()=>{await ee.modal.showConfirmDialog({title:e("common.dialog.tips"),msg:e("setting.accurate_hit_area_tips"),confirmButtonText:"common.msg.ok"})&&x()},D=t=>{switch(t){case"about":_.push({path:"system-about"});break;case"help":s.sendEvent(new ye);break;case"project":s.sendEvent(new ke);break;case"shop":s.sendEvent(new fe);break}},re=t=>{var C;l.value=!1;let d=t.selectedValues[0];c.value[0],J[i.value]&&J[i.value](t),i.value&&i.value==="language"&&(H.value=d),i.value&&i.value==="unit"&&((C=window.sensors)==null||C.track("unitSet",{}))},pe=()=>{l.value=!1},de=()=>{M.value=!0};return(t,d)=>{const C=Qe,$=Ue,_e=Be,ge=Pe,ve=$e,W=Ye;return o(),r(S,null,[(o(!0),r(S,null,L(N.value,(k,me)=>(o(),E(_e,{key:me,border:!1,inset:"",class:"setting-cell-group"},{default:h(()=>[(o(!0),r(S,null,L(k,m=>(o(),E($,{key:m.id,class:"setting-cell","is-link":"",center:"",boeder:"",value:ce(F.value[m.id],Z.value[m.id])||"",onClick:Y=>m.onClick&&m.onClick(m.id)},{title:h(()=>[a("div",We,[a("span",Ke,I(m.title),1),m.icon?(o(),E(u(b),{key:0,name:m.icon,class:"cell-icon fl svg-tip f-s-20",onClick:Oe(Y=>m.onIconClick&&m.onIconClick(),["stop"])},null,8,["name","onClick"])):z("",!0)])]),"right-icon":h(()=>[m.type==="switch"?(o(),r("div",Xe,[p(C,{modelValue:n.value,"onUpdate:modelValue":d[0]||(d[0]=Y=>n.value=Y),"active-color":"#28BE44",size:"20px",class:"mk-switch",onChange:ue},null,8,["modelValue"])])):(o(),E(u(b),{key:1,class:"arrow_right f-s-22",name:"arrow_right",size:"22px"}))]),_:2},1032,["value","onClick"]))),128))]),_:2},1024))),128)),p(ve,{show:l.value,"onUpdate:show":d[1]||(d[1]=k=>l.value=k),round:"",position:"bottom","close-on-click-overlay":!0},{default:h(()=>[(o(),E(ge,{key:v.value,"model-value":c.value,title:Q.value,columns:Z.value[i.value]||[],"columns-field-names":{text:"label"},onConfirm:re,onCancel:pe},{confirm:h(()=>[p(u(b),{name:"checkmark",size:"24px",class:"f-s-24"})]),cancel:h(()=>[p(u(b),{name:"close",size:"24px",class:"f-s-24"})]),_:1},8,["model-value","title","columns"]))]),_:1},8,["show"]),p(W,{show:M.value,"onUpdate:show":d[2]||(d[2]=k=>M.value=k),class:"quality-wrapper",title:u(e)("setting.graphics_curves_quality.title"),"confirm-button-text":u(e)("component.button.iknow"),"show-confirm-button":""},{default:h(()=>[(o(!0),r(S,null,L(Object.keys(j.value),k=>(o(),r("div",{key:k,class:"quality-tips-wrap"},[a("span",null,I(j.value[k][0]),1),X(" "+I(j.value[k][1]),1)]))),128))]),_:1},8,["show","title","confirm-button-text"]),p(W,{show:f.value,"onUpdate:show":d[3]||(d[3]=k=>f.value=k),class:"effect-wrapper",title:u(e)("mobile.common.notice"),"confirm-button-text":u(e)("common.dialog.ok")},{default:h(()=>[X(I(u(e)("setting.graphics_curves_quality.take_effect_tips")),1)]),_:1},8,["show","title","confirm-button-text"])],64)}}}),tt=T(et,[["__scopeId","data-v-9ca67659"]]),nt="data:image/svg+xml,%3csvg%20width='57'%20height='56'%20viewBox='0%200%2057%2056'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3ccircle%20cx='28.5371'%20cy='28'%20r='28'%20fill='%23B0B2B5'/%3e%3cpath%20d='M29.221%2026.961C31.9713%2026.6573%2034.198%2024.4305%2034.5017%2021.6803C34.9008%2018.0596%2032.0783%2015%2028.5386%2015C25.2244%2015%2022.5378%2017.6837%2022.5378%2020.9978V21.0007C22.5378%2024.5404%2025.6004%2027.36%2029.221%2026.961ZM28.5386%2028.7135C24.5333%2028.7135%2016.5371%2031.0096%2016.5371%2035.5702V38.1411C16.5371%2038.6154%2016.9217%2038.9971%2017.3931%2038.9971H39.6811C40.1554%2038.9971%2040.5371%2038.6125%2040.5371%2038.1411V35.5702C40.54%2031.0125%2032.5439%2028.7135%2028.5386%2028.7135Z'%20fill='%23F7F9FB'/%3e%3c/svg%3e",ot={class:"user-box"},st={class:"user-info"},lt={key:0,class:"name-box"},at={class:"user-name text-ellipsis-line"},it={key:1,class:"user-signature text-ellipsis-line2"},ct="data:image/svg+xml;base64,Cjxzdmcgd2lkdGg9IjU3IiBoZWlnaHQ9IjU3IiB2aWV3Qm94PSIwIDAgNTcgNTciIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxjaXJjbGUgY3g9IjI4LjUzNzEiIGN5PSIyOC4yNTI5IiByPSIyOCIgZmlsbD0iI0IwQjJCNSIvPgo8cGF0aCBkPSJNMjkuMTM4MiAyNi40NzI5QzMxLjgxMjEgMjYuMTc3NyAzMy45NzcgMjQuMDEyOCAzNC4yNzIyIDIxLjMzOUMzNC42NjAyIDE3LjgxODkgMzEuOTE2MSAxNC44NDQyIDI4LjQ3NDcgMTQuODQ0MkMyNS4yNTI2IDE0Ljg0NDIgMjIuNjQwNyAxNy40NTM0IDIyLjY0MDcgMjAuNjc1NVYyMC42NzgzQzIyLjY0MDcgMjQuMTE5NyAyNS42MTgxIDI2Ljg2MDkgMjkuMTM4MiAyNi40NzI5Wk0yOC40NzQ3IDI4LjE3NjhDMjQuNTgwNyAyOC4xNzY4IDE2LjgwNjYgMzAuNDA5MiAxNi44MDY2IDM0Ljg0M1YzNy4zNDI1QzE2LjgwNjYgMzcuODAzNiAxNy4xODA2IDM4LjE3NDggMTcuNjM4OSAzOC4xNzQ4SDM5LjMwNzdDMzkuNzY4OCAzOC4xNzQ4IDQwLjE0IDM3LjgwMDggNDAuMTQgMzcuMzQyNVYzNC44NDNDNDAuMTQyOCAzMC40MTIgMzIuMzY4OCAyOC4xNzY4IDI4LjQ3NDcgMjguMTc2OFoiIGZpbGw9IiNGN0Y5RkIiLz4KPC9zdmc+Cg==",ut=A({__name:"UserInfo",setup(w){const _=Ne().isOnline,{t:s}=V(),l=O(R),i={aspectRatio:"auto",cardBgc:"#fff",borderRadius:16},c=y(!1),v=()=>{let n=localStorage.getItem("userInfo"),x={userName:"",headpic:"",signature:""};return n&&(x=JSON.parse(n),console.log("result---",x)),x},f=g(()=>{var n;return _.value?c.value?(n=l.uiState.userInfo)==null?void 0:n.userName:"":v().userName}),M=g(()=>{var n;return _.value?c.value?(n=l.uiState.userInfo)==null?void 0:n.headpic:nt:v().userName}),N=g(()=>{var n;return _.value?c.value?(n=l.uiState.userInfo)==null?void 0:n.signature:"":v().signature}),Q=()=>{c.value||(l.sendEvent(new je),be({source:"XCS-MOBILE",entry:"xcs-login-button"}))},j=()=>{ee.modal.showRenameModal({name:f.value,title:s("mobile.projects.dialog_rename_project"),confirmTxt:s("common.msg.ok"),onConfirm:n=>{l.sendEvent(new Se(n))}})};return te(()=>l.uiState.isLogin,n=>{c.value=n}),(n,x)=>{const U=qe,B=b;return o(),r("div",null,[p(u(oe),se(i,{class:"user-container"}),{default:h(()=>[a("div",ot,[p(U,{fit:"cover",position:"center",class:"person-icon",round:"",src:M.value},{error:h(()=>[a("img",{src:ct,style:{width:"100%",height:"100%"},alt:""})]),_:1},8,["src"]),a("div",st,[c.value?(o(),r("div",lt,[a("div",at,I(f.value),1),p(B,{name:"device-edit",size:"16px",class:"f-s-16 user-name-icon",onClick:j})])):z("",!0),N.value?(o(),r("div",it,I(N.value),1)):z("",!0),c.value?z("",!0):(o(),r("div",{key:2,class:"user-button sign-button",onClick:Q},I(u(s)("mobile.common.person_login")),1))])]),c.value?(o(),E(Je,{key:0})):z("",!0)]),_:1},16)])}}}),rt=T(ut,[["__scopeId","data-v-b5a0be42"]]),pt=w=>(Te("data-v-f843404d"),w=w(),Ve(),w),dt={class:"container"},_t=pt(()=>a("div",{class:"mask-bg"},null,-1)),gt={ref:"containerRef",class:"personal-wrapper"},vt={class:"personal-nav"},mt={class:"section-box"},ht={class:"section-box"},ft={key:0,class:"section-box"},kt=A({__name:"Index",setup(w){const{t:e}=V(),_=O(R),s=y(!1),l=ne(),i=()=>{l.back()};te(()=>_.uiState.isLogin,v=>{s.value=v});const c=()=>{_.sendEvent(new De)};return(v,f)=>{const M=b,N=Ge;return o(),r("div",dt,[_t,a("div",gt,[a("section",vt,[p(N,{fixed:"",placeholder:"","z-index":"100",title:u(e)("ipad.home.slider.settings")},{left:h(()=>[p(M,{name:"arrow_left",size:"24px",class:"f-s-24",color:"#ffffff",onClick:i})]),_:1},8,["title"]),a("section",mt,[p(u(rt))])]),a("section",ht,[p(u(tt))]),s.value?(o(),r("section",ft,[a("div",{class:"logout",onClick:c},[a("span",null,I(v.$t("mobile.common.person_logout")),1)])])):z("",!0)],512)])}}}),zt=T(kt,[["__scopeId","data-v-f843404d"]]);export{zt as default};
